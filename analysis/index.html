<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>开始 | Grbl 源码解析与移植</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/logo.png">
    <meta name="description" content="Grbl源码精度与解析，代码行级中文注释并提供丰富详尽的案例展示。">
    
    <link rel="preload" href="/assets/css/0.styles.e8e4f3a3.css" as="style"><link rel="preload" href="/assets/js/app.9025fca6.js" as="script"><link rel="preload" href="/assets/js/2.2179b996.js" as="script"><link rel="preload" href="/assets/js/3.281ea079.js" as="script"><link rel="prefetch" href="/assets/js/10.506d157f.js"><link rel="prefetch" href="/assets/js/11.94485d27.js"><link rel="prefetch" href="/assets/js/12.7b1fc706.js"><link rel="prefetch" href="/assets/js/13.c6140b6d.js"><link rel="prefetch" href="/assets/js/14.d07f98cd.js"><link rel="prefetch" href="/assets/js/15.5a807fbe.js"><link rel="prefetch" href="/assets/js/16.e78a27f6.js"><link rel="prefetch" href="/assets/js/17.ee4b6d1f.js"><link rel="prefetch" href="/assets/js/18.f8873908.js"><link rel="prefetch" href="/assets/js/19.7715a2d5.js"><link rel="prefetch" href="/assets/js/20.c4557d58.js"><link rel="prefetch" href="/assets/js/21.026d9e3b.js"><link rel="prefetch" href="/assets/js/22.3cfcf25e.js"><link rel="prefetch" href="/assets/js/23.4bd6be5d.js"><link rel="prefetch" href="/assets/js/24.b53af0cd.js"><link rel="prefetch" href="/assets/js/25.13b5e8ac.js"><link rel="prefetch" href="/assets/js/26.9fc3e80f.js"><link rel="prefetch" href="/assets/js/27.43445fc6.js"><link rel="prefetch" href="/assets/js/28.e7443675.js"><link rel="prefetch" href="/assets/js/29.61bde2d7.js"><link rel="prefetch" href="/assets/js/30.2e24a202.js"><link rel="prefetch" href="/assets/js/31.04abe46c.js"><link rel="prefetch" href="/assets/js/32.48fdc75e.js"><link rel="prefetch" href="/assets/js/33.4925b93a.js"><link rel="prefetch" href="/assets/js/34.cad5a87d.js"><link rel="prefetch" href="/assets/js/35.64d99878.js"><link rel="prefetch" href="/assets/js/36.9793640a.js"><link rel="prefetch" href="/assets/js/37.d64dba23.js"><link rel="prefetch" href="/assets/js/38.288a21e6.js"><link rel="prefetch" href="/assets/js/39.56d06a43.js"><link rel="prefetch" href="/assets/js/4.684c220d.js"><link rel="prefetch" href="/assets/js/40.31f94a78.js"><link rel="prefetch" href="/assets/js/41.efc6288a.js"><link rel="prefetch" href="/assets/js/5.44e5e94b.js"><link rel="prefetch" href="/assets/js/6.c60b674b.js"><link rel="prefetch" href="/assets/js/7.cc83311f.js"><link rel="prefetch" href="/assets/js/8.ba3f58b3.js"><link rel="prefetch" href="/assets/js/9.79ed1b22.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e8e4f3a3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="Grbl 源码解析与移植" class="logo"> <span class="site-name can-hide">Grbl 源码解析与移植</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/donate/" class="nav-link">
  打赏
</a></div><div class="nav-item"><a href="https://github.com/MillerRen/grbl" target="_blank" rel="noopener noreferrer" class="nav-link external">
  grbl中文注解
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/MillerRen/grbl-learning" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/donate/" class="nav-link">
  打赏
</a></div><div class="nav-item"><a href="https://github.com/MillerRen/grbl" target="_blank" rel="noopener noreferrer" class="nav-link external">
  grbl中文注解
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/MillerRen/grbl-learning" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/" aria-current="page" class="sidebar-link">首页</a></li><li><a href="/preface.html" class="sidebar-link">前言</a></li><li><a href="/prepare.html" class="sidebar-link">准备工作</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/analysis/" aria-current="page" class="sidebar-heading clickable router-link-exact-active router-link-active open active"><span>Grbl源码解析</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/analysis/" aria-current="page" class="active sidebar-link">开始</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/analysis/#下载grbl源代码" class="sidebar-link">下载grbl源代码</a></li><li class="sidebar-sub-header"><a href="/analysis/#为grbl源码添加platformio支持" class="sidebar-link">为grbl源码添加platformio支持</a></li><li class="sidebar-sub-header"><a href="/analysis/#编译grbl源代码" class="sidebar-link">编译grbl源代码</a></li><li class="sidebar-sub-header"><a href="/analysis/#连接arduino到电脑" class="sidebar-link">连接Arduino到电脑</a></li><li class="sidebar-sub-header"><a href="/analysis/#烧录grbl固件" class="sidebar-link">烧录grbl固件</a></li><li class="sidebar-sub-header"><a href="/analysis/#连接上位机" class="sidebar-link">连接上位机</a></li></ul></li><li><a href="/analysis/architecture.html" class="sidebar-link">架构</a></li><li><a href="/analysis/main.html" class="sidebar-link">主入口</a></li><li><a href="/analysis/serial.html" class="sidebar-link">串口</a></li><li><a href="/analysis/protocol.html" class="sidebar-link">协议</a></li><li><a href="/analysis/system.html" class="sidebar-link">状态机</a></li><li><a href="/analysis/gcode.html" class="sidebar-link">G代码解析</a></li><li><a href="/analysis/motion.html" class="sidebar-link">运动控制</a></li><li><a href="/analysis/planner.html" class="sidebar-link">运动规划</a></li><li><a href="/analysis/acceleration.html" class="sidebar-link">加速度算法</a></li><li><a href="/analysis/bresenham.html" class="sidebar-link">bresenham插值算法</a></li><li><a href="/analysis/stepper.html" class="sidebar-link">运动执行-步进电机</a></li><li><a href="/analysis/spindle.html" class="sidebar-link">主轴</a></li><li><a href="/analysis/coolant.html" class="sidebar-link">冷却</a></li><li><a href="/analysis/endstop.html" class="sidebar-link">限位开关</a></li><li><a href="/analysis/homing.html" class="sidebar-link">归位</a></li><li><a href="/analysis/probe.html" class="sidebar-link">对刀</a></li><li><a href="/analysis/emergency.html" class="sidebar-link">安全-紧急事件</a></li><li><a href="/analysis/settings.html" class="sidebar-link">参数设置</a></li><li><a href="/analysis/interface.html" class="sidebar-link">上位机接口</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/porting/" class="sidebar-heading clickable"><span>Grbl移植</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/extensions/" class="sidebar-heading clickable"><span>Grbl扩展</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/appendix/" class="sidebar-link">附录</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="开始"><a href="#开始" class="header-anchor">#</a> 开始</h1> <h2 id="下载grbl源代码"><a href="#下载grbl源代码" class="header-anchor">#</a> 下载grbl源代码</h2> <p>一般情况下，我们只需要在ArduinoIDE中下载grbl库，然后引用它的头文件即可使用，但是我们是为了研究它的源码，所以我们需要从github下载它的源代码，仓库地址为：<a href="https://github.com/gnea/grbl" target="_blank" rel="noopener noreferrer">https://github.com/gnea/grbl<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>,你可以使用版本管理工具<code>git</code>克隆它，也可以下载压缩包（作者推荐）。
<img src="/assets/img/download-grbl-source-code.91521d75.png" alt="download-grbl-cource-code"></p> <h2 id="为grbl源码添加platformio支持"><a href="#为grbl源码添加platformio支持" class="header-anchor">#</a> 为grbl源码添加platformio支持</h2> <ol><li>我们下载并安装<code>Virtual Studio Code</code>（下称VScode），然后再搜索安装VScode的插件<code>platformio</code>（PlatformIO（也称PIO）是一款开源且跨平台的嵌入式系统与产品程序的开发工具，可用于多种嵌入式架构与平台的开发。它也为VScode提供了插件）。</li> <li>用VScode打开下载的grbl源代码并创建一个名为<code>platformio.ini</code>的文件，内容如下：</li></ol> <div class="language- extra-class"><pre class="language-text"><code>[platformio]
src_dir = grbl # 指定源代码位置
build_dir = build # 指定构建输出位置

[env:default]
platform = atmelavr # 指定单片机平台
board_build.mcu = atmega328p # 指定MCU
board_build.f_cpu = 16000000L # 指定CPU频率，这里使用的是16M晶振

upload_protocol = arduino # 指定烧录协议
monitor_speed = 115200 # 指定串口监控波特率，如果你使用PIO自带的串口监视的话
</code></pre></div><p><img src="/assets/img/add-platformio-support.47e46e59.png" alt="add-platformio-support"></p> <h2 id="编译grbl源代码"><a href="#编译grbl源代码" class="header-anchor">#</a> 编译grbl源代码</h2> <p>点击VScode左侧的PIO图标，在菜单中选择<code>build</code>，如果编译成功，则会在右下侧输出success标记。如果不成功，请确保步骤跟上面说的一致，还不成功的话自行查找问题，直到成功为止。如下图：<br> <img src="/assets/img/compile-grbl.10b12ef5.png" alt="compile grbl"></p> <h2 id="连接arduino到电脑"><a href="#连接arduino到电脑" class="header-anchor">#</a> 连接Arduino到电脑</h2> <p>用USB线连接Arduino和电脑，在电脑的硬件管理器中会看到虚拟出来的串口，如果没有识别出来，需要安装Arduino串口芯片驱动。如下图：<br> <img src="/assets/img/serial-port.9610a9b2.png" alt="serial-port"></p> <h2 id="烧录grbl固件"><a href="#烧录grbl固件" class="header-anchor">#</a> 烧录grbl固件</h2> <p>点击upload按钮，PIO会自动查找可用的串口，等待上传成功即可。如下图：<br> <img src="/assets/img/upload-grbl.2113b8ce.png" alt="upload grbl"></p> <h2 id="连接上位机"><a href="#连接上位机" class="header-anchor">#</a> 连接上位机</h2> <p>下载上位机软件<code>lasergrbl</code>并安装，在左侧的串口连接区选择对应的串口点击连接，连接成功后会出现经典的grbl欢迎信息。如下图：<br> <img src="/assets/img/connect-grbl.89ad43b0.png" alt="connect grbl"><br>
在上位机的console中，可以输入G代码控制grbl，G代码一般由CAM（计算机辅助制造）软件生成。在这里我们只需要一些简单的G代码，暂时用不到CAM软件。</p> <p>至此，grbl源码的准备工作已做好，我们将用VScode做编辑器，用PIO做为编译器工具，用lasergrbl做上位机和grbl进行交互。如果你已经完成，恭喜你，请为你自己点个赞，为自己点赞的同时也别忘了给我点个赞^_^。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/prepare.html" class="prev">
        准备工作
      </a></span> <span class="next"><a href="/analysis/architecture.html">
        架构
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.9025fca6.js" defer></script><script src="/assets/js/2.2179b996.js" defer></script><script src="/assets/js/3.281ea079.js" defer></script>
  </body>
</html>
